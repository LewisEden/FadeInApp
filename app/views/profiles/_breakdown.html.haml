-@projects.each do |project|
  - project.users.each do |user|
    - @them = UserProject.where(user_id: @user.id, project_id: project.id)
    - @them.each do |it|
      - if it.user_id == user.id
        - if project.completed?
          - if it.user_role == "Director"
            - @hasdirector = true
          - if it.user_role == "Actor"
            - @hasactor = true
          - if it.user_role == "Writer"
            - @haswriter = true
          - if it.user_role == "Editor"
            - @haseditor = true
          - if it.user_role == "Cinematographer"
            - @hascinematographer = true
          - if it.user_role == "Composer"
            - @hascomposer = true
          - if it.user_role == "VFX"
            - @hasvfx = true
          - if it.user_role == "Makeup"
            - @hasmakeup = true

%h3 My current projects
%hr
.card-group
  -@projects.each do |project|
    - if project.completed == false || project.completed == nil
      .card.card-home
        = image_tag project.image.url(:medium), :class => "img-fluid"
        .card-block
          - if project.genre == "Action"
            //Action
            %i.red-text.fa.fa-fighter-jet
            %h5.red-text.display-inline
              = project.genre
            %i.red-text.fa.fa-clock-o
            %h5.red-text.display-inline
              = project.duration
          - elsif project.genre == "Adventure"
            //Adventure
            %i.green-text.fa.fa-envira
            %h5.green-text.display-inline
              = project.genre
            %i.green-text.fa.fa-clock-o
            %h5.green-text.display-inline
              = project.duration
          - elsif project.genre == "Comedy"
            //Comedy
            %i.cyan-text.fa.fa-smile-o
            %h5.cyan-text.display-inline
              = project.genre
            %i.cyan-text.fa.fa-clock-o
            %h5.cyan-text.display-inline
              = project.duration
          - elsif project.genre == "Crime"
            //Crime
            %i.orange-text.fa.fa-gavel
            %h5.orange-text.display-inline
              = project.genre
            %i.orange-text.fa.fa-clock-o
            %h5.orange-text.display-inline
              = project.duration
          - elsif project.genre == "Drama"
            //Drama
            %i.amber-text.fa.fa-group
            %h5.amber-text.display-inline
              = project.genre
            %i.amber-text.fa.fa-clock-o
            %h5.amber-text.display-inline
              = project.duration
          - elsif project.genre == "Horror"
            //Horror
            %i.brown-text.fa.fa-warning
            %h5.brown-text.display-inline
              = project.genre
            %i.brown-text.fa.fa-clock-o
            %h5.brown-text.display-inline
              = project.duration
          - else
            //Si-fi
            %i.teal-text.fa.fa-rocket
            %h5.teal-text.display-inline
              = project.genre
            %i.teal-text.fa.fa-clock-o
            %h5.teal-text.display-inline
              = project.duration
          %h4.card-title.project-title
            = project.title
          %p.card-text
            = truncate(project.synopsis, length: 120)
          - project.users.each do |user|
            - @them = UserProject.where(user_id: @user.id, project_id: project.id)
            - @them.each do |it|
              - if it.user_id == user.id
                My role:
                = it.user_role
          = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
            View Project
- if @hasdirector == true
  %br     
  %h3 Films I have directed
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "Director"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project
- if @haswriter == true
  %br     
  %h3 Films I have written
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "Writer"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project
- if @hasactor == true
  %br     
  %h3 Films I have acted in
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "Actor"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project
- if @hascinematographer == true
  %br     
  %h3 Films I have shot
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "Cinematographer"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project
- if @haseditor == true
  %br     
  %h3 Films I have edited
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "Editor"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project
- if @hascomposer == true
  %br     
  %h3 Films I have composed for
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "Composer"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project
- if @hasmakeup == true
  %br     
  %h3 Films I have done makeup for
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "Makeup"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project
- if @hasvfx == true
  %br     
  %h3 Films I did VFX for
  %hr
  .card-group
    -@projects.each do |project|
      - project.users.each do |user|
        - @them = UserProject.where(user_id: @user.id, project_id: project.id)
        - @them.each do |it|
          - if it.user_id == user.id
            - if it.user_role == "VFX"
              .card.card-home
                = image_tag project.image.url(:medium), :class => "img-fluid"
                .card-block
                  - if project.genre == "Action"
                    //Action
                    %i.red-text.fa.fa-fighter-jet
                    %h5.red-text.display-inline
                      = project.genre
                    %i.red-text.fa.fa-clock-o
                    %h5.red-text.display-inline
                      = project.duration
                  - elsif project.genre == "Adventure"
                    //Adventure
                    %i.green-text.fa.fa-envira
                    %h5.green-text.display-inline
                      = project.genre
                    %i.green-text.fa.fa-clock-o
                    %h5.green-text.display-inline
                      = project.duration
                  - elsif project.genre == "Comedy"
                    //Comedy
                    %i.cyan-text.fa.fa-smile-o
                    %h5.cyan-text.display-inline
                      = project.genre
                    %i.cyan-text.fa.fa-clock-o
                    %h5.cyan-text.display-inline
                      = project.duration
                  - elsif project.genre == "Crime"
                    //Crime
                    %i.orange-text.fa.fa-gavel
                    %h5.orange-text.display-inline
                      = project.genre
                    %i.orange-text.fa.fa-clock-o
                    %h5.orange-text.display-inline
                      = project.duration
                  - elsif project.genre == "Drama"
                    //Drama
                    %i.amber-text.fa.fa-group
                    %h5.amber-text.display-inline
                      = project.genre
                    %i.amber-text.fa.fa-clock-o
                    %h5.amber-text.display-inline
                      = project.duration
                  - elsif project.genre == "Horror"
                    //Horror
                    %i.brown-text.fa.fa-warning
                    %h5.brown-text.display-inline
                      = project.genre
                    %i.brown-text.fa.fa-clock-o
                    %h5.brown-text.display-inline
                      = project.duration
                  - else
                    //Si-fi
                    %i.teal-text.fa.fa-rocket
                    %h5.teal-text.display-inline
                      = project.genre
                    %i.teal-text.fa.fa-clock-o
                    %h5.teal-text.display-inline
                      = project.duration
                  %h4.card-title.project-title
                    = project.title
                  %p.card-text
                    = truncate(project.synopsis, length: 120)
                  = link_to project_path(project), :class => "btn btn-rounded btn-primary btn-sm float-right display-inline" do
                    View Project